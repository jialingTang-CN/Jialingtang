<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>秋分加载中｜乙巳年七月廿九</title>
  <style>
    /* 秋日极简风格 */
    body {
      margin: 0;
      background: #f8f3e6;
      font-family: "Noto Serif SC", serif;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: #5a3921;
    }
    
    /* 真实进度条容器 */
    .progress-container {
      width: 80%;
      max-width: 400px;
      height: 8px;
      background: rgba(140,61,26,0.1);
      border-radius: 4px;
      margin: 20px 0;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #d4a76a, #8c3d1a);
      transition: width 0.3s ease;
    }
    
    /* 秋叶装饰（静态） */
    .leaf-icon {
      width: 60px;
      height: 60px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 100 100"><path d="M50,0 C60,20 85,15 90,30 C95,50 85,60 75,55 C80,75 60,85 50,80 C40,85 20,75 25,55 C15,60 5,50 10,30 C15,15 40,20 50,0 Z" fill="%23d4a76a"/></svg>');
      margin-bottom: 20px;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <div class="leaf-icon"></div>
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  <div id="loadingText">正在连接秋日秘境...</div>
 
  <script>
    // 真实资源预加载监控 
    function loadWithRealProgress() {
      const targetPage = 'index1.html';  // 您指定的预加载页面 
      const progressBar = document.getElementById('progressBar'); 
      const loadingText = document.getElementById('loadingText'); 
      
      // 真实资源列表（需替换为您的实际资源）
      const resources = [
        targetPage,
        'styles/main.css', 
        'scripts/app.js', 
        'images/background.jpg' 
      ];
      
      let loadedCount = 0;
      const totalCount = resources.length; 
      
      // 遍历加载每个资源 
      resources.forEach(url  => {
        const xhr = new XMLHttpRequest();
        xhr.open('GET',  url, true);
        xhr.onprogress  = (e) => {
          if (e.lengthComputable)  {
            const percent = Math.round((e.loaded  / e.total)  * 100);
            updateProgress((loadedCount + percent / 100) / totalCount * 100);
          }
        };
        xhr.onload  = () => {
          loadedCount++;
          updateProgress(loadedCount / totalCount * 100);
          if (loadedCount === totalCount) {
            setTimeout(() => {
              window.location.href  = targetPage + '?preloaded=true';
            }, 500);
          }
        };
        xhr.onerror  = () => {
          loadedCount++;
          updateProgress(loadedCount / totalCount * 100);
        };
        xhr.send(); 
      });
      
      // 进度更新函数 
      function updateProgress(percent) {
        progressBar.style.width  = `${percent}%`;
        loadingText.textContent  = getLoadingMessage(percent);
      }
      
      // 阶段提示语 
      function getLoadingMessage(percent) {
        if (percent < 30) return "正在准备秋日画卷...";
        if (percent < 70) return "加载金秋色彩...";
        return "即将带您领略乙巳年秋色...";
      }
    } 
 
    // 启动系统 
    document.addEventListener('DOMContentLoaded',  loadWithRealProgress);
  </script>
</body>
</html>
