<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>正在加载 · 秋意正浓</title>
  <style>
    /* 中国风基础样式 */
    body {
      margin: 0;
      background: #f8f3e6 url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"  width="100" height="100" opacity="0.05"><path d="M30,50 Q50,30 70,50 T90,50" stroke="%23d4a76a" fill="none"/></svg>');
      font-family: "Noto Serif SC", serif;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: #5a3921;
      overflow: hidden;
    }
    
    /* 红叶容器 */
    .loader-container {
      position: relative;
      width: 300px;
      height: 200px;
      margin-bottom: 30px;
    }
    
    /* 动态红叶（纯CSS实现） */
    .maple-leaf {
      position: absolute;
      width: 60px;
      height: 60px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 100 100"><path d="M50,10 L60,40 L90,50 L60,60 L50,90 L40,60 L10,50 L40,40 Z" fill="%23d4a76a"/></svg>') no-repeat;
      animation: falling 8s linear infinite;
      opacity: 0;
	  background-size: contain;
      filter: 
        drop-shadow(1px 1px 0.5px rgba(140,61,26,0.3))
        drop-shadow(-1px -1px 0.5px rgba(255,215,0,0.2));
      transform-origin: 50% 0;
      animation: 
        falling 8s ease-in-out infinite,
        sway 2s ease-in-out infinite alternate;
    }
    
    /* 进度条容器 */
    .progress-container {
      width: 80%;
      max-width: 400px;
      height: 6px;
      background: #e8d5b5;
      border-radius: 3px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    /* 动态进度条 */
    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #d4a76a, #8c3d1a);
      transition: width 0.3s ease;
      border-radius: 3px;
    }
    
    /* 文字提示 */
    .loading-text {
      margin-top: 20px;
      font-size: 1.2rem;
      letter-spacing: 2px;
    }
    
    /* 红叶飘落动画 */
    @keyframes sway {   
	  0% { transform: translateX(0px) rotate(-2deg); }
      100% { transform: translateX(5px) rotate(2deg); }
    }
    
    /* 响应式调整 */
    @media (max-width: 600px) {
      .loader-container { width: 200px; }
      .loading-text { font-size: 1rem; }
    }
  </style>
</head>
<body>
  <div class="loader-container" id="leafContainer"></div>
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>
  <div class="loading-text" id="loadingText">正在为您准备秋日盛宴...</div>
 
  <script>
    // 进度模拟系统 
    const progressBar = document.getElementById('progressBar'); 
    const loadingText = document.getElementById('loadingText'); 
    const leafContainer = document.getElementById('leafContainer'); 
    const tips = [
      "采菊东篱下，悠然见南山...",
      "枫叶红于二月花...",
      "天凉好个秋...",
      "七月流火，九月授衣...",
      "稻花香里说丰年..."
    ];
    
    // 创建红叶元素 
    function createLeaves() {
      for (let i = 0; i < 8; i++) {
        const leaf = document.createElement('div'); 
        leaf.className  = 'maple-leaf';
        leaf.style.left  = `${Math.random()  * 240}px`;
        leaf.style.animationDelay  = `${i * 0.5}s`;
        leafContainer.appendChild(leaf); 
      }
    }
    
    // 模拟网络加载进度 
    function simulateProgress() {
      let progress = 0;
      const interval = setInterval(() => {
        // 随机进度增量（模拟网络波动）
        const increment = Math.random()  * 5 + 1;
        progress = Math.min(progress  + increment, 100);
        
        progressBar.style.width  = `${progress}%`;
        
        // 每25%更换一次提示文字 
        if (progress % 25 < 1) {
          loadingText.textContent  = tips[Math.floor(progress / 25)];
        }
        
        // 完成时跳转 
        if (progress >= 100) {
          clearInterval(interval);
          loadingText.textContent  = "秋色已备，请君入席...";
          setTimeout(() => {
            window.location.href  = "main.html";  // 替换为实际入口页面 
          }, 1000);
        }
      }, 300); // 检测间隔300ms 
    }
    
    // 启动预加载系统 
    window.addEventListener('DOMContentLoaded',  () => {
      createLeaves();
      simulateProgress();
      
      // 真实网络检测（备用方案）
      if (navigator.connection)  {
        const connection = navigator.connection; 
        if (connection.effectiveType.includes('2g')  || connection.saveData)  {
          loadingText.textContent  = "网络较慢，正在精心准备...";
        }
      }
    });
  </script>
  
  <!-- 预加载字体（非阻塞式） -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400&display=swap"  as="style">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400&display=swap"> 
</body>
</html>